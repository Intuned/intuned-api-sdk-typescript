/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { remap as remap$ } from "../../lib/primitives.js";
import { safeParse } from "../../lib/schemas.js";
import { ClosedEnum } from "../../types/enums.js";
import { Result as SafeParseResult } from "../../types/fp.js";
import { SDKValidationError } from "../errors/sdkvalidationerror.js";

export type CreateAuthSessionResultGlobals = {
  /**
   * Your workspace ID. [How to find it](/docs/guides/general/how-to-get-a-workspace-id)?
   */
  workspaceId?: string | undefined;
};

export type CreateAuthSessionResultRequest = {
  /**
   * Your project name. It is the name you provide when creating a project.
   */
  projectName: string;
  /**
   * The ID for the operation. This is obtained from the start request.
   */
  operationId: string;
};

/**
 * Optional error code for more specific error identification
 */
export const CreateAuthSessionResultResponseBodyCode = {
  InternalServerError: "internal-server-error",
  ScriptProcessCrashed: "script-process-crashed",
  Unexpected: "unexpected",
  ScriptExecutionException: "script-execution-exception",
  ScriptNoValidOutputReceived: "script-no-valid-output-received",
  ResultTooBigError: "result-too-big-error",
  ScriptTimeout: "script-timeout",
  ScriptUnexpectedError: "script-unexpected-error",
  AuthCheckFailed: "auth-check-failed",
  AllAttemptsFailed: "all-attempts-failed",
  CheckAttemptsFailed: "check-attempts-failed",
  CreateAttemptsFailed: "create-attempts-failed",
  PostCreateCheckAttemptsFailed: "post-create-check-attempts-failed",
  ApiAttemptsFailed: "api-attempts-failed",
  OnepasswordIntegrationError: "onepassword-integration-error",
  JobRunTerminated: "job-run-terminated",
} as const;
/**
 * Optional error code for more specific error identification
 */
export type CreateAuthSessionResultResponseBodyCode = ClosedEnum<
  typeof CreateAuthSessionResultResponseBodyCode
>;

export const CreateAuthSessionResultResponseBodyCategory = {
  Infrastructure: "infrastructure",
  Execution: "execution",
  Auth: "auth",
  User: "user",
  Billing: "billing",
} as const;
export type CreateAuthSessionResultResponseBodyCategory = ClosedEnum<
  typeof CreateAuthSessionResultResponseBodyCategory
>;

export type CreateAuthSessionResultResponseBodyError = {
  /**
   * Error message describing the failure
   */
  message: string;
  /**
   * Optional error code for more specific error identification
   */
  code?: CreateAuthSessionResultResponseBodyCode | undefined;
  category: CreateAuthSessionResultResponseBodyCategory;
  retirable: boolean;
  /**
   * Optional URL to documentation for this error
   */
  docUrl?: string | undefined;
  /**
   * Optional correlation ID for tracing the error in logs
   */
  correlationId?: string | undefined;
  details?: any | undefined;
};

export type ResponseBodyFailed = {
  status: "failed";
  message: string;
  error: CreateAuthSessionResultResponseBodyError;
};

export type ResponseBodyInProgress = {
  status: "in_progress";
  /**
   * Unique identifier for the run, nanoId of 21 characters
   */
  runId: string;
};

export const CreateAuthSessionResultResponseBodyType = {
  AuthSessionValidateDependencyFailed:
    "auth-session-validate-dependency-failed",
  Terminated: "terminated",
  JobRunPaused: "job-run-paused",
  JobRunTerminated: "job-run-terminated",
  FailedToInitializeJobRun: "failed-to-initialize-job-run",
  ApiAccessDisabled: "api-access-disabled",
  CancelledUserAction: "cancelled-user-action",
} as const;
export type CreateAuthSessionResultResponseBodyType = ClosedEnum<
  typeof CreateAuthSessionResultResponseBodyType
>;

export type CreateAuthSessionResultResponseBodyReason = {
  type: CreateAuthSessionResultResponseBodyType;
  message: string;
  /**
   * Optional URL to documentation for this error
   */
  docUrl?: string | undefined;
  details?: any | undefined;
};

export type ResponseBodyCanceled = {
  status: "canceled";
  message: string;
  reason: CreateAuthSessionResultResponseBodyReason;
};

export type ResponseBodyPending = {
  status: "pending";
};

export type ResponseBodyDone = {
  status: "done";
  /**
   * The unique identifier for the authentication session
   */
  authSessionId: string;
};

/**
 * AuthSession creation result
 */
export type CreateAuthSessionResultResponseBody =
  | ResponseBodyDone
  | ResponseBodyPending
  | ResponseBodyCanceled
  | ResponseBodyInProgress
  | ResponseBodyFailed;

/** @internal */
export type CreateAuthSessionResultRequest$Outbound = {
  projectName: string;
  operationId: string;
};

/** @internal */
export const CreateAuthSessionResultRequest$outboundSchema: z.ZodType<
  CreateAuthSessionResultRequest$Outbound,
  z.ZodTypeDef,
  CreateAuthSessionResultRequest
> = z.object({
  projectName: z.string(),
  operationId: z.string(),
});

export function createAuthSessionResultRequestToJSON(
  createAuthSessionResultRequest: CreateAuthSessionResultRequest,
): string {
  return JSON.stringify(
    CreateAuthSessionResultRequest$outboundSchema.parse(
      createAuthSessionResultRequest,
    ),
  );
}

/** @internal */
export const CreateAuthSessionResultResponseBodyCode$inboundSchema:
  z.ZodNativeEnum<typeof CreateAuthSessionResultResponseBodyCode> = z
    .nativeEnum(CreateAuthSessionResultResponseBodyCode);

/** @internal */
export const CreateAuthSessionResultResponseBodyCategory$inboundSchema:
  z.ZodNativeEnum<typeof CreateAuthSessionResultResponseBodyCategory> = z
    .nativeEnum(CreateAuthSessionResultResponseBodyCategory);

/** @internal */
export const CreateAuthSessionResultResponseBodyError$inboundSchema: z.ZodType<
  CreateAuthSessionResultResponseBodyError,
  z.ZodTypeDef,
  unknown
> = z.object({
  message: z.string(),
  code: CreateAuthSessionResultResponseBodyCode$inboundSchema.optional(),
  category: CreateAuthSessionResultResponseBodyCategory$inboundSchema,
  retirable: z.boolean().default(false),
  doc_url: z.string().optional(),
  correlation_id: z.string().optional(),
  details: z.any().optional(),
}).transform((v) => {
  return remap$(v, {
    "doc_url": "docUrl",
    "correlation_id": "correlationId",
  });
});

export function createAuthSessionResultResponseBodyErrorFromJSON(
  jsonString: string,
): SafeParseResult<
  CreateAuthSessionResultResponseBodyError,
  SDKValidationError
> {
  return safeParse(
    jsonString,
    (x) =>
      CreateAuthSessionResultResponseBodyError$inboundSchema.parse(
        JSON.parse(x),
      ),
    `Failed to parse 'CreateAuthSessionResultResponseBodyError' from JSON`,
  );
}

/** @internal */
export const ResponseBodyFailed$inboundSchema: z.ZodType<
  ResponseBodyFailed,
  z.ZodTypeDef,
  unknown
> = z.object({
  status: z.literal("failed"),
  message: z.string(),
  error: z.lazy(() => CreateAuthSessionResultResponseBodyError$inboundSchema),
});

export function responseBodyFailedFromJSON(
  jsonString: string,
): SafeParseResult<ResponseBodyFailed, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => ResponseBodyFailed$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'ResponseBodyFailed' from JSON`,
  );
}

/** @internal */
export const ResponseBodyInProgress$inboundSchema: z.ZodType<
  ResponseBodyInProgress,
  z.ZodTypeDef,
  unknown
> = z.object({
  status: z.literal("in_progress"),
  runId: z.string(),
});

export function responseBodyInProgressFromJSON(
  jsonString: string,
): SafeParseResult<ResponseBodyInProgress, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => ResponseBodyInProgress$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'ResponseBodyInProgress' from JSON`,
  );
}

/** @internal */
export const CreateAuthSessionResultResponseBodyType$inboundSchema:
  z.ZodNativeEnum<typeof CreateAuthSessionResultResponseBodyType> = z
    .nativeEnum(CreateAuthSessionResultResponseBodyType);

/** @internal */
export const CreateAuthSessionResultResponseBodyReason$inboundSchema: z.ZodType<
  CreateAuthSessionResultResponseBodyReason,
  z.ZodTypeDef,
  unknown
> = z.object({
  type: CreateAuthSessionResultResponseBodyType$inboundSchema,
  message: z.string(),
  doc_url: z.string().optional(),
  details: z.any().optional(),
}).transform((v) => {
  return remap$(v, {
    "doc_url": "docUrl",
  });
});

export function createAuthSessionResultResponseBodyReasonFromJSON(
  jsonString: string,
): SafeParseResult<
  CreateAuthSessionResultResponseBodyReason,
  SDKValidationError
> {
  return safeParse(
    jsonString,
    (x) =>
      CreateAuthSessionResultResponseBodyReason$inboundSchema.parse(
        JSON.parse(x),
      ),
    `Failed to parse 'CreateAuthSessionResultResponseBodyReason' from JSON`,
  );
}

/** @internal */
export const ResponseBodyCanceled$inboundSchema: z.ZodType<
  ResponseBodyCanceled,
  z.ZodTypeDef,
  unknown
> = z.object({
  status: z.literal("canceled"),
  message: z.string(),
  reason: z.lazy(() => CreateAuthSessionResultResponseBodyReason$inboundSchema),
});

export function responseBodyCanceledFromJSON(
  jsonString: string,
): SafeParseResult<ResponseBodyCanceled, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => ResponseBodyCanceled$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'ResponseBodyCanceled' from JSON`,
  );
}

/** @internal */
export const ResponseBodyPending$inboundSchema: z.ZodType<
  ResponseBodyPending,
  z.ZodTypeDef,
  unknown
> = z.object({
  status: z.literal("pending"),
});

export function responseBodyPendingFromJSON(
  jsonString: string,
): SafeParseResult<ResponseBodyPending, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => ResponseBodyPending$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'ResponseBodyPending' from JSON`,
  );
}

/** @internal */
export const ResponseBodyDone$inboundSchema: z.ZodType<
  ResponseBodyDone,
  z.ZodTypeDef,
  unknown
> = z.object({
  status: z.literal("done"),
  authSessionId: z.string(),
});

export function responseBodyDoneFromJSON(
  jsonString: string,
): SafeParseResult<ResponseBodyDone, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => ResponseBodyDone$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'ResponseBodyDone' from JSON`,
  );
}

/** @internal */
export const CreateAuthSessionResultResponseBody$inboundSchema: z.ZodType<
  CreateAuthSessionResultResponseBody,
  z.ZodTypeDef,
  unknown
> = z.union([
  z.lazy(() => ResponseBodyDone$inboundSchema),
  z.lazy(() => ResponseBodyPending$inboundSchema),
  z.lazy(() => ResponseBodyCanceled$inboundSchema),
  z.lazy(() => ResponseBodyInProgress$inboundSchema),
  z.lazy(() => ResponseBodyFailed$inboundSchema),
]);

export function createAuthSessionResultResponseBodyFromJSON(
  jsonString: string,
): SafeParseResult<CreateAuthSessionResultResponseBody, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) =>
      CreateAuthSessionResultResponseBody$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'CreateAuthSessionResultResponseBody' from JSON`,
  );
}
