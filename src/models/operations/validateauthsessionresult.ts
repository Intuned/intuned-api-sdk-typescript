/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { remap as remap$ } from "../../lib/primitives.js";
import { safeParse } from "../../lib/schemas.js";
import { ClosedEnum } from "../../types/enums.js";
import { Result as SafeParseResult } from "../../types/fp.js";
import { SDKValidationError } from "../errors/sdkvalidationerror.js";

export type ValidateAuthSessionResultGlobals = {
  /**
   * Your workspace ID. [How to find it](/docs/03-how-to/manage/manage-workspace#how-to-get-your-workspace-id)?
   */
  workspaceId?: string | undefined;
};

export type ValidateAuthSessionResultRequest = {
  /**
   * The name you assigned when creating the Project.
   */
  projectName: string;
  /**
   * Authentication session ID. You can obtain it from the Auth Sessions tab in your project details.
   */
  authSessionId: string;
  /**
   * The ID for the operation. This is obtained from the start request.
   */
  operationId: string;
};

/**
 * Optional error code for more specific error identification
 */
export const ResponseBodyCode = {
  InternalServerError: "internal-server-error",
  ScriptProcessCrashed: "script-process-crashed",
  Unexpected: "unexpected",
  ScriptExecutionException: "script-execution-exception",
  ScriptNoValidOutputReceived: "script-no-valid-output-received",
  ResultTooBigError: "result-too-big-error",
  ScriptTimeout: "script-timeout",
  ScriptUnexpectedError: "script-unexpected-error",
  AuthCheckFailed: "auth-check-failed",
  AllAttemptsFailed: "all-attempts-failed",
  CheckAttemptsFailed: "check-attempts-failed",
  CreateAttemptsFailed: "create-attempts-failed",
  PostCreateCheckAttemptsFailed: "post-create-check-attempts-failed",
  ApiAttemptsFailed: "api-attempts-failed",
  OnepasswordIntegrationError: "onepassword-integration-error",
  JobRunTerminated: "job-run-terminated",
} as const;
/**
 * Optional error code for more specific error identification
 */
export type ResponseBodyCode = ClosedEnum<typeof ResponseBodyCode>;

export const ResponseBodyCategory = {
  Infrastructure: "infrastructure",
  Execution: "execution",
  Auth: "auth",
  User: "user",
  Billing: "billing",
} as const;
export type ResponseBodyCategory = ClosedEnum<typeof ResponseBodyCategory>;

export type ResponseBodyError = {
  /**
   * Error message describing the failure
   */
  message: string;
  /**
   * Optional error code for more specific error identification
   */
  code?: ResponseBodyCode | undefined;
  category: ResponseBodyCategory;
  retirable: boolean;
  /**
   * Optional URL to documentation for this error
   */
  docUrl?: string | undefined;
  /**
   * Optional correlation ID for tracing the error in logs
   */
  correlationId?: string | undefined;
  details?: any | undefined;
};

export type Failed = {
  status: "failed";
  message: string;
  error: ResponseBodyError;
};

export type InProgress = {
  status: "in_progress";
  /**
   * Unique identifier for the run, nanoId of 21 characters
   */
  runId: string;
};

export const ResponseBodyType = {
  AuthSessionValidateDependencyFailed:
    "auth-session-validate-dependency-failed",
  Terminated: "terminated",
  JobRunPaused: "job-run-paused",
  JobRunTerminated: "job-run-terminated",
  FailedToInitializeJobRun: "failed-to-initialize-job-run",
  ApiAccessDisabled: "api-access-disabled",
  CancelledUserAction: "cancelled-user-action",
} as const;
export type ResponseBodyType = ClosedEnum<typeof ResponseBodyType>;

export type ResponseBodyReason = {
  type: ResponseBodyType;
  message: string;
  /**
   * Optional URL to documentation for this error
   */
  docUrl?: string | undefined;
  details?: any | undefined;
};

export type Canceled = {
  status: "canceled";
  message: string;
  reason: ResponseBodyReason;
};

export type Pending = {
  status: "pending";
};

export type Done = {
  status: "done";
  /**
   * The unique identifier for the authentication session
   */
  authSessionId: string;
};

/**
 * Get AuthSession validation result.
 */
export type ValidateAuthSessionResultResponseBody =
  | Done
  | Pending
  | Canceled
  | InProgress
  | Failed;

/** @internal */
export type ValidateAuthSessionResultRequest$Outbound = {
  projectName: string;
  authSessionId: string;
  operationId: string;
};

/** @internal */
export const ValidateAuthSessionResultRequest$outboundSchema: z.ZodType<
  ValidateAuthSessionResultRequest$Outbound,
  z.ZodTypeDef,
  ValidateAuthSessionResultRequest
> = z.object({
  projectName: z.string(),
  authSessionId: z.string(),
  operationId: z.string(),
});

export function validateAuthSessionResultRequestToJSON(
  validateAuthSessionResultRequest: ValidateAuthSessionResultRequest,
): string {
  return JSON.stringify(
    ValidateAuthSessionResultRequest$outboundSchema.parse(
      validateAuthSessionResultRequest,
    ),
  );
}

/** @internal */
export const ResponseBodyCode$inboundSchema: z.ZodNativeEnum<
  typeof ResponseBodyCode
> = z.nativeEnum(ResponseBodyCode);

/** @internal */
export const ResponseBodyCategory$inboundSchema: z.ZodNativeEnum<
  typeof ResponseBodyCategory
> = z.nativeEnum(ResponseBodyCategory);

/** @internal */
export const ResponseBodyError$inboundSchema: z.ZodType<
  ResponseBodyError,
  z.ZodTypeDef,
  unknown
> = z.object({
  message: z.string(),
  code: ResponseBodyCode$inboundSchema.optional(),
  category: ResponseBodyCategory$inboundSchema,
  retirable: z.boolean().default(false),
  doc_url: z.string().optional(),
  correlation_id: z.string().optional(),
  details: z.any().optional(),
}).transform((v) => {
  return remap$(v, {
    "doc_url": "docUrl",
    "correlation_id": "correlationId",
  });
});

export function responseBodyErrorFromJSON(
  jsonString: string,
): SafeParseResult<ResponseBodyError, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => ResponseBodyError$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'ResponseBodyError' from JSON`,
  );
}

/** @internal */
export const Failed$inboundSchema: z.ZodType<Failed, z.ZodTypeDef, unknown> = z
  .object({
    status: z.literal("failed"),
    message: z.string(),
    error: z.lazy(() => ResponseBodyError$inboundSchema),
  });

export function failedFromJSON(
  jsonString: string,
): SafeParseResult<Failed, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => Failed$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'Failed' from JSON`,
  );
}

/** @internal */
export const InProgress$inboundSchema: z.ZodType<
  InProgress,
  z.ZodTypeDef,
  unknown
> = z.object({
  status: z.literal("in_progress"),
  runId: z.string(),
});

export function inProgressFromJSON(
  jsonString: string,
): SafeParseResult<InProgress, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => InProgress$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'InProgress' from JSON`,
  );
}

/** @internal */
export const ResponseBodyType$inboundSchema: z.ZodNativeEnum<
  typeof ResponseBodyType
> = z.nativeEnum(ResponseBodyType);

/** @internal */
export const ResponseBodyReason$inboundSchema: z.ZodType<
  ResponseBodyReason,
  z.ZodTypeDef,
  unknown
> = z.object({
  type: ResponseBodyType$inboundSchema,
  message: z.string(),
  doc_url: z.string().optional(),
  details: z.any().optional(),
}).transform((v) => {
  return remap$(v, {
    "doc_url": "docUrl",
  });
});

export function responseBodyReasonFromJSON(
  jsonString: string,
): SafeParseResult<ResponseBodyReason, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => ResponseBodyReason$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'ResponseBodyReason' from JSON`,
  );
}

/** @internal */
export const Canceled$inboundSchema: z.ZodType<
  Canceled,
  z.ZodTypeDef,
  unknown
> = z.object({
  status: z.literal("canceled"),
  message: z.string(),
  reason: z.lazy(() => ResponseBodyReason$inboundSchema),
});

export function canceledFromJSON(
  jsonString: string,
): SafeParseResult<Canceled, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => Canceled$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'Canceled' from JSON`,
  );
}

/** @internal */
export const Pending$inboundSchema: z.ZodType<Pending, z.ZodTypeDef, unknown> =
  z.object({
    status: z.literal("pending"),
  });

export function pendingFromJSON(
  jsonString: string,
): SafeParseResult<Pending, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => Pending$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'Pending' from JSON`,
  );
}

/** @internal */
export const Done$inboundSchema: z.ZodType<Done, z.ZodTypeDef, unknown> = z
  .object({
    status: z.literal("done"),
    authSessionId: z.string(),
  });

export function doneFromJSON(
  jsonString: string,
): SafeParseResult<Done, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => Done$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'Done' from JSON`,
  );
}

/** @internal */
export const ValidateAuthSessionResultResponseBody$inboundSchema: z.ZodType<
  ValidateAuthSessionResultResponseBody,
  z.ZodTypeDef,
  unknown
> = z.union([
  z.lazy(() => Done$inboundSchema),
  z.lazy(() => Pending$inboundSchema),
  z.lazy(() => Canceled$inboundSchema),
  z.lazy(() => InProgress$inboundSchema),
  z.lazy(() => Failed$inboundSchema),
]);

export function validateAuthSessionResultResponseBodyFromJSON(
  jsonString: string,
): SafeParseResult<ValidateAuthSessionResultResponseBody, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) =>
      ValidateAuthSessionResultResponseBody$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'ValidateAuthSessionResultResponseBody' from JSON`,
  );
}
