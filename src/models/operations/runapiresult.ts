/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { remap as remap$ } from "../../lib/primitives.js";
import { safeParse } from "../../lib/schemas.js";
import { ClosedEnum } from "../../types/enums.js";
import { Result as SafeParseResult } from "../../types/fp.js";
import { SDKValidationError } from "../errors/sdkvalidationerror.js";

export type RunApiResultGlobals = {
  /**
   * Your workspace ID. [How to find it](/docs/guides/general/how-to-get-a-workspace-id)?
   */
  workspaceId?: string | undefined;
};

export type RunApiResultRequest = {
  /**
   * Your project name. It is the name you provide when creating a project.
   */
  projectName: string;
  /**
   * Run ID
   */
  runId: string;
};

/**
 * Status of the run execution
 */
export const RunApiResultStatus = {
  Pending: "pending",
  Started: "started",
  Completed: "completed",
  Canceled: "canceled",
  Failed: "failed",
} as const;
/**
 * Status of the run execution
 */
export type RunApiResultStatus = ClosedEnum<typeof RunApiResultStatus>;

export type ExtendedPayloads = {
  /**
   * The name of the API to be executed. This is the file path relative to the `api` folder inside your project.
   */
  api: string;
  runId?: string | undefined;
  /**
   * The parameters to be passed to the API.
   */
  parameters?: { [k: string]: any } | undefined;
};

/**
 * Optional error code for more specific error identification
 */
export const Code = {
  InternalServerError: "internal-server-error",
  ScriptProcessCrashed: "script-process-crashed",
  Unexpected: "unexpected",
  ScriptExecutionException: "script-execution-exception",
  ScriptNoValidOutputReceived: "script-no-valid-output-received",
  ResultTooBigError: "result-too-big-error",
  ScriptTimeout: "script-timeout",
  ScriptUnexpectedError: "script-unexpected-error",
  AuthCheckFailed: "auth-check-failed",
  AllAttemptsFailed: "all-attempts-failed",
  CheckAttemptsFailed: "check-attempts-failed",
  CreateAttemptsFailed: "create-attempts-failed",
  PostCreateCheckAttemptsFailed: "post-create-check-attempts-failed",
  ApiAttemptsFailed: "api-attempts-failed",
  OnepasswordIntegrationError: "onepassword-integration-error",
  JobRunTerminated: "job-run-terminated",
} as const;
/**
 * Optional error code for more specific error identification
 */
export type Code = ClosedEnum<typeof Code>;

export const Category = {
  Infrastructure: "infrastructure",
  Execution: "execution",
  Auth: "auth",
  User: "user",
  Billing: "billing",
} as const;
export type Category = ClosedEnum<typeof Category>;

export type ErrorT = {
  /**
   * Error message describing the failure
   */
  message: string;
  /**
   * Optional error code for more specific error identification
   */
  code?: Code | undefined;
  category: Category;
  retirable?: boolean | undefined;
  /**
   * Optional URL to documentation for this error
   */
  docUrl?: string | undefined;
  /**
   * Optional correlation ID for tracing the error in logs
   */
  correlationId?: string | undefined;
  details?: any | undefined;
};

export const RunApiResultType = {
  AuthSessionValidateDependencyFailed:
    "auth-session-validate-dependency-failed",
  Terminated: "terminated",
  JobRunPaused: "job-run-paused",
  JobRunTerminated: "job-run-terminated",
  FailedToInitializeJobRun: "failed-to-initialize-job-run",
  ApiAccessDisabled: "api-access-disabled",
} as const;
export type RunApiResultType = ClosedEnum<typeof RunApiResultType>;

export type Reason = {
  type: RunApiResultType;
  message: string;
  /**
   * Optional URL to documentation for this error
   */
  docUrl?: string | undefined;
  details?: any | undefined;
};

/**
 * Run result with status and output data.
 */
export type RunApiResultResponseBody = {
  /**
   * Unique identifier for the run, nanoId of 21 characters
   */
  runId: string;
  /**
   * Status of the run execution
   */
  status: RunApiResultStatus;
  /**
   * Output result of the run execution
   */
  result?: any | undefined;
  /**
   * Extended payloads from the run execution
   */
  extendedPayloads?: Array<ExtendedPayloads> | undefined;
  error?: ErrorT | undefined;
  /**
   * Error or reason message
   */
  message?: string | undefined;
  reason?: Reason | undefined;
};

/** @internal */
export const RunApiResultGlobals$inboundSchema: z.ZodType<
  RunApiResultGlobals,
  z.ZodTypeDef,
  unknown
> = z.object({
  workspaceId: z.string().optional(),
});

/** @internal */
export type RunApiResultGlobals$Outbound = {
  workspaceId?: string | undefined;
};

/** @internal */
export const RunApiResultGlobals$outboundSchema: z.ZodType<
  RunApiResultGlobals$Outbound,
  z.ZodTypeDef,
  RunApiResultGlobals
> = z.object({
  workspaceId: z.string().optional(),
});

/**
 * @internal
 * @deprecated This namespace will be removed in future versions. Use schemas and types that are exported directly from this module.
 */
export namespace RunApiResultGlobals$ {
  /** @deprecated use `RunApiResultGlobals$inboundSchema` instead. */
  export const inboundSchema = RunApiResultGlobals$inboundSchema;
  /** @deprecated use `RunApiResultGlobals$outboundSchema` instead. */
  export const outboundSchema = RunApiResultGlobals$outboundSchema;
  /** @deprecated use `RunApiResultGlobals$Outbound` instead. */
  export type Outbound = RunApiResultGlobals$Outbound;
}

export function runApiResultGlobalsToJSON(
  runApiResultGlobals: RunApiResultGlobals,
): string {
  return JSON.stringify(
    RunApiResultGlobals$outboundSchema.parse(runApiResultGlobals),
  );
}

export function runApiResultGlobalsFromJSON(
  jsonString: string,
): SafeParseResult<RunApiResultGlobals, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => RunApiResultGlobals$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'RunApiResultGlobals' from JSON`,
  );
}

/** @internal */
export const RunApiResultRequest$inboundSchema: z.ZodType<
  RunApiResultRequest,
  z.ZodTypeDef,
  unknown
> = z.object({
  projectName: z.string(),
  runId: z.string(),
});

/** @internal */
export type RunApiResultRequest$Outbound = {
  projectName: string;
  runId: string;
};

/** @internal */
export const RunApiResultRequest$outboundSchema: z.ZodType<
  RunApiResultRequest$Outbound,
  z.ZodTypeDef,
  RunApiResultRequest
> = z.object({
  projectName: z.string(),
  runId: z.string(),
});

/**
 * @internal
 * @deprecated This namespace will be removed in future versions. Use schemas and types that are exported directly from this module.
 */
export namespace RunApiResultRequest$ {
  /** @deprecated use `RunApiResultRequest$inboundSchema` instead. */
  export const inboundSchema = RunApiResultRequest$inboundSchema;
  /** @deprecated use `RunApiResultRequest$outboundSchema` instead. */
  export const outboundSchema = RunApiResultRequest$outboundSchema;
  /** @deprecated use `RunApiResultRequest$Outbound` instead. */
  export type Outbound = RunApiResultRequest$Outbound;
}

export function runApiResultRequestToJSON(
  runApiResultRequest: RunApiResultRequest,
): string {
  return JSON.stringify(
    RunApiResultRequest$outboundSchema.parse(runApiResultRequest),
  );
}

export function runApiResultRequestFromJSON(
  jsonString: string,
): SafeParseResult<RunApiResultRequest, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => RunApiResultRequest$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'RunApiResultRequest' from JSON`,
  );
}

/** @internal */
export const RunApiResultStatus$inboundSchema: z.ZodNativeEnum<
  typeof RunApiResultStatus
> = z.nativeEnum(RunApiResultStatus);

/** @internal */
export const RunApiResultStatus$outboundSchema: z.ZodNativeEnum<
  typeof RunApiResultStatus
> = RunApiResultStatus$inboundSchema;

/**
 * @internal
 * @deprecated This namespace will be removed in future versions. Use schemas and types that are exported directly from this module.
 */
export namespace RunApiResultStatus$ {
  /** @deprecated use `RunApiResultStatus$inboundSchema` instead. */
  export const inboundSchema = RunApiResultStatus$inboundSchema;
  /** @deprecated use `RunApiResultStatus$outboundSchema` instead. */
  export const outboundSchema = RunApiResultStatus$outboundSchema;
}

/** @internal */
export const ExtendedPayloads$inboundSchema: z.ZodType<
  ExtendedPayloads,
  z.ZodTypeDef,
  unknown
> = z.object({
  api: z.string(),
  runId: z.string().optional(),
  parameters: z.record(z.any()).optional(),
});

/** @internal */
export type ExtendedPayloads$Outbound = {
  api: string;
  runId?: string | undefined;
  parameters?: { [k: string]: any } | undefined;
};

/** @internal */
export const ExtendedPayloads$outboundSchema: z.ZodType<
  ExtendedPayloads$Outbound,
  z.ZodTypeDef,
  ExtendedPayloads
> = z.object({
  api: z.string(),
  runId: z.string().optional(),
  parameters: z.record(z.any()).optional(),
});

/**
 * @internal
 * @deprecated This namespace will be removed in future versions. Use schemas and types that are exported directly from this module.
 */
export namespace ExtendedPayloads$ {
  /** @deprecated use `ExtendedPayloads$inboundSchema` instead. */
  export const inboundSchema = ExtendedPayloads$inboundSchema;
  /** @deprecated use `ExtendedPayloads$outboundSchema` instead. */
  export const outboundSchema = ExtendedPayloads$outboundSchema;
  /** @deprecated use `ExtendedPayloads$Outbound` instead. */
  export type Outbound = ExtendedPayloads$Outbound;
}

export function extendedPayloadsToJSON(
  extendedPayloads: ExtendedPayloads,
): string {
  return JSON.stringify(
    ExtendedPayloads$outboundSchema.parse(extendedPayloads),
  );
}

export function extendedPayloadsFromJSON(
  jsonString: string,
): SafeParseResult<ExtendedPayloads, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => ExtendedPayloads$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'ExtendedPayloads' from JSON`,
  );
}

/** @internal */
export const Code$inboundSchema: z.ZodNativeEnum<typeof Code> = z.nativeEnum(
  Code,
);

/** @internal */
export const Code$outboundSchema: z.ZodNativeEnum<typeof Code> =
  Code$inboundSchema;

/**
 * @internal
 * @deprecated This namespace will be removed in future versions. Use schemas and types that are exported directly from this module.
 */
export namespace Code$ {
  /** @deprecated use `Code$inboundSchema` instead. */
  export const inboundSchema = Code$inboundSchema;
  /** @deprecated use `Code$outboundSchema` instead. */
  export const outboundSchema = Code$outboundSchema;
}

/** @internal */
export const Category$inboundSchema: z.ZodNativeEnum<typeof Category> = z
  .nativeEnum(Category);

/** @internal */
export const Category$outboundSchema: z.ZodNativeEnum<typeof Category> =
  Category$inboundSchema;

/**
 * @internal
 * @deprecated This namespace will be removed in future versions. Use schemas and types that are exported directly from this module.
 */
export namespace Category$ {
  /** @deprecated use `Category$inboundSchema` instead. */
  export const inboundSchema = Category$inboundSchema;
  /** @deprecated use `Category$outboundSchema` instead. */
  export const outboundSchema = Category$outboundSchema;
}

/** @internal */
export const ErrorT$inboundSchema: z.ZodType<ErrorT, z.ZodTypeDef, unknown> = z
  .object({
    message: z.string(),
    code: Code$inboundSchema.optional(),
    category: Category$inboundSchema,
    retirable: z.boolean().default(false),
    doc_url: z.string().optional(),
    correlation_id: z.string().optional(),
    details: z.any().optional(),
  }).transform((v) => {
    return remap$(v, {
      "doc_url": "docUrl",
      "correlation_id": "correlationId",
    });
  });

/** @internal */
export type ErrorT$Outbound = {
  message: string;
  code?: string | undefined;
  category: string;
  retirable: boolean;
  doc_url?: string | undefined;
  correlation_id?: string | undefined;
  details?: any | undefined;
};

/** @internal */
export const ErrorT$outboundSchema: z.ZodType<
  ErrorT$Outbound,
  z.ZodTypeDef,
  ErrorT
> = z.object({
  message: z.string(),
  code: Code$outboundSchema.optional(),
  category: Category$outboundSchema,
  retirable: z.boolean().default(false),
  docUrl: z.string().optional(),
  correlationId: z.string().optional(),
  details: z.any().optional(),
}).transform((v) => {
  return remap$(v, {
    docUrl: "doc_url",
    correlationId: "correlation_id",
  });
});

/**
 * @internal
 * @deprecated This namespace will be removed in future versions. Use schemas and types that are exported directly from this module.
 */
export namespace ErrorT$ {
  /** @deprecated use `ErrorT$inboundSchema` instead. */
  export const inboundSchema = ErrorT$inboundSchema;
  /** @deprecated use `ErrorT$outboundSchema` instead. */
  export const outboundSchema = ErrorT$outboundSchema;
  /** @deprecated use `ErrorT$Outbound` instead. */
  export type Outbound = ErrorT$Outbound;
}

export function errorToJSON(errorT: ErrorT): string {
  return JSON.stringify(ErrorT$outboundSchema.parse(errorT));
}

export function errorFromJSON(
  jsonString: string,
): SafeParseResult<ErrorT, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => ErrorT$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'ErrorT' from JSON`,
  );
}

/** @internal */
export const RunApiResultType$inboundSchema: z.ZodNativeEnum<
  typeof RunApiResultType
> = z.nativeEnum(RunApiResultType);

/** @internal */
export const RunApiResultType$outboundSchema: z.ZodNativeEnum<
  typeof RunApiResultType
> = RunApiResultType$inboundSchema;

/**
 * @internal
 * @deprecated This namespace will be removed in future versions. Use schemas and types that are exported directly from this module.
 */
export namespace RunApiResultType$ {
  /** @deprecated use `RunApiResultType$inboundSchema` instead. */
  export const inboundSchema = RunApiResultType$inboundSchema;
  /** @deprecated use `RunApiResultType$outboundSchema` instead. */
  export const outboundSchema = RunApiResultType$outboundSchema;
}

/** @internal */
export const Reason$inboundSchema: z.ZodType<Reason, z.ZodTypeDef, unknown> = z
  .object({
    type: RunApiResultType$inboundSchema,
    message: z.string(),
    doc_url: z.string().optional(),
    details: z.any().optional(),
  }).transform((v) => {
    return remap$(v, {
      "doc_url": "docUrl",
    });
  });

/** @internal */
export type Reason$Outbound = {
  type: string;
  message: string;
  doc_url?: string | undefined;
  details?: any | undefined;
};

/** @internal */
export const Reason$outboundSchema: z.ZodType<
  Reason$Outbound,
  z.ZodTypeDef,
  Reason
> = z.object({
  type: RunApiResultType$outboundSchema,
  message: z.string(),
  docUrl: z.string().optional(),
  details: z.any().optional(),
}).transform((v) => {
  return remap$(v, {
    docUrl: "doc_url",
  });
});

/**
 * @internal
 * @deprecated This namespace will be removed in future versions. Use schemas and types that are exported directly from this module.
 */
export namespace Reason$ {
  /** @deprecated use `Reason$inboundSchema` instead. */
  export const inboundSchema = Reason$inboundSchema;
  /** @deprecated use `Reason$outboundSchema` instead. */
  export const outboundSchema = Reason$outboundSchema;
  /** @deprecated use `Reason$Outbound` instead. */
  export type Outbound = Reason$Outbound;
}

export function reasonToJSON(reason: Reason): string {
  return JSON.stringify(Reason$outboundSchema.parse(reason));
}

export function reasonFromJSON(
  jsonString: string,
): SafeParseResult<Reason, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => Reason$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'Reason' from JSON`,
  );
}

/** @internal */
export const RunApiResultResponseBody$inboundSchema: z.ZodType<
  RunApiResultResponseBody,
  z.ZodTypeDef,
  unknown
> = z.object({
  runId: z.string(),
  status: RunApiResultStatus$inboundSchema,
  result: z.any().optional(),
  extendedPayloads: z.array(z.lazy(() => ExtendedPayloads$inboundSchema))
    .optional(),
  error: z.lazy(() => ErrorT$inboundSchema).optional(),
  message: z.string().optional(),
  reason: z.lazy(() => Reason$inboundSchema).optional(),
});

/** @internal */
export type RunApiResultResponseBody$Outbound = {
  runId: string;
  status: string;
  result?: any | undefined;
  extendedPayloads?: Array<ExtendedPayloads$Outbound> | undefined;
  error?: ErrorT$Outbound | undefined;
  message?: string | undefined;
  reason?: Reason$Outbound | undefined;
};

/** @internal */
export const RunApiResultResponseBody$outboundSchema: z.ZodType<
  RunApiResultResponseBody$Outbound,
  z.ZodTypeDef,
  RunApiResultResponseBody
> = z.object({
  runId: z.string(),
  status: RunApiResultStatus$outboundSchema,
  result: z.any().optional(),
  extendedPayloads: z.array(z.lazy(() => ExtendedPayloads$outboundSchema))
    .optional(),
  error: z.lazy(() => ErrorT$outboundSchema).optional(),
  message: z.string().optional(),
  reason: z.lazy(() => Reason$outboundSchema).optional(),
});

/**
 * @internal
 * @deprecated This namespace will be removed in future versions. Use schemas and types that are exported directly from this module.
 */
export namespace RunApiResultResponseBody$ {
  /** @deprecated use `RunApiResultResponseBody$inboundSchema` instead. */
  export const inboundSchema = RunApiResultResponseBody$inboundSchema;
  /** @deprecated use `RunApiResultResponseBody$outboundSchema` instead. */
  export const outboundSchema = RunApiResultResponseBody$outboundSchema;
  /** @deprecated use `RunApiResultResponseBody$Outbound` instead. */
  export type Outbound = RunApiResultResponseBody$Outbound;
}

export function runApiResultResponseBodyToJSON(
  runApiResultResponseBody: RunApiResultResponseBody,
): string {
  return JSON.stringify(
    RunApiResultResponseBody$outboundSchema.parse(runApiResultResponseBody),
  );
}

export function runApiResultResponseBodyFromJSON(
  jsonString: string,
): SafeParseResult<RunApiResultResponseBody, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => RunApiResultResponseBody$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'RunApiResultResponseBody' from JSON`,
  );
}
